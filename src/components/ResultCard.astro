---
// ResultCard Component - RGB Glass Design
interface Result {
  label: string;
  probability: number;
}

interface Props {
  type?: "language" | "accent";
  detected?: string;
  confidence?: number;
  results?: Result[];
}

const {
  type = "language",
  detected = "",
  confidence = 0,
  results = [],
} = Astro.props;

const gradientClass =
  type === "language"
    ? "from-green-500 to-emerald-500"
    : "from-blue-500 to-cyan-500";

const borderClass =
  type === "language" ? "border-green-500/30" : "border-blue-500/30";
---

<div
  class={`glass-strong rounded-2xl p-6 border-l-4 ${borderClass} transition-all duration-300 hover:scale-[1.02]`}
>
  <!-- Header -->
  <div class="flex justify-between items-center mb-4">
    <span class="text-sm text-gray-400 uppercase tracking-wider font-semibold">
      {type === "language" ? "Idioma Detectado" : "Acento Probable"}
    </span>
    <span
      class={`text-2xl font-bold ${type === "language" ? "text-green-400" : "text-blue-400"}`}
    >
      {(confidence * 100).toFixed(1)}%
    </span>
  </div>

  <!-- Main result -->
  <h3 class="text-3xl font-black mb-6 gradient-text">
    {detected}
  </h3>

  <!-- Progress bars -->
  <div class="space-y-3">
    {
      results.slice(0, 4).map((result) => (
        <div class="transition-all duration-300 hover:translate-x-1">
          <div class="flex justify-between text-sm mb-1.5">
            <span class="text-gray-300 font-medium">{result.label}</span>
            <span class="text-gray-400">
              {(result.probability * 100).toFixed(1)}%
            </span>
          </div>
          <div class="w-full bg-white/5 rounded-full h-2 overflow-hidden">
            <div
              class={`h-full bg-gradient-to-r ${gradientClass} rounded-full transition-all duration-700 ease-out`}
              style={`width: ${result.probability * 100}%`}
            />
          </div>
        </div>
      ))
    }
  </div>
</div>

<style>
  .glass-strong:hover {
    background: rgba(255, 255, 255, 0.08);
  }
</style>
